<div class="companies-form-container">
  <div class="header">
    <h2>{{ (isEditing ? 'COMPANIES.TITLE.EDIT' : 'COMPANIES.TITLE.NEW') | translate }}</h2>
  </div>

  <div class="loading-overlay" *ngIf="loading">
    <div class="spinner"></div>
  </div>

  <form [formGroup]="form" (ngSubmit)="onSubmit()" *ngIf="!loading">
    <div class="form-group">
      <app-input
        [control]="nameControl"
        [options]="{
          type: 'text',
          label: 'COMPANIES.FORM.NAME',
          placeholder: 'COMPANIES.FORM.NAME_PLACEHOLDER',
          id: 'name',
          required: true,
          errorMessages: {
            required: 'COMPANIES.ERROR.NAME_REQUIRED',
            minlength: 'COMPANIES.ERROR.NAME_MIN_LENGTH'
          }
        }"
      ></app-input>
    </div>

    <div class="form-group">
      <app-input
        [control]="emailControl"
        [options]="{
          type: 'email',
          label: 'COMPANIES.FORM.EMAIL',
          placeholder: 'COMPANIES.FORM.EMAIL_PLACEHOLDER',
          id: 'email',
          required: true,
          errorMessages: {
            required: 'COMPANIES.ERROR.EMAIL_REQUIRED',
            email: 'COMPANIES.ERROR.EMAIL_INVALID'
          }
        }"
      ></app-input>
    </div>

    <div class="form-group checkbox">
      <label>
        <input type="checkbox" formControlName="active">
        {{ 'COMPANIES.FORM.ACTIVE' | translate }}
      </label>
    </div>

    <div class="form-group">
      <app-json-input
        [control]="configControl"
        [label]="'COMPANIES.FORM.CONFIG'"
        [placeholder]="'COMPANIES.FORM.CONFIG_PLACEHOLDER'"
        id="config"
      ></app-json-input>
    </div>

    <div class="form-actions">
      <button type="button" class="btn-secondary" (click)="cancel()">
        {{ 'COMPANIES.FORM.CANCEL' | translate }}
      </button>
      <button type="submit" class="btn-primary" [disabled]="saving">
        {{ (saving ? 'COMPANIES.FORM.SAVING' : 'COMPANIES.FORM.SAVE') | translate }}
      </button>
    </div>
  </form>
</div>